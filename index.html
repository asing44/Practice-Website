<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="A practice website for HTML, CSS, and JS.">

        <link rel="stylesheet" href="./styles.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Noto+Serif&family=Rubik&display=swap" rel="stylesheet">
        
        <title>A Practice Site</title>
    </head>
    <body>
        <div class="intro">
            <div id="intro_text"> 
                <div id="intro_text_welcome">Welcome</div>
                <div id="intro_text_left"></div>
                <div id="intro_text_center">Hi</div>
                <div id="intro_text_right"></div>
            </div>
        </div>
        <script> // Intro Animation Script
            const text_welcome = document.getElementById("intro_text_welcome");
            const text_right = document.getElementById("intro_text_right");
            const text_center = document.getElementById("intro_text_center");
            const text_left = document.getElementById("intro_text_left");
            const intro = document.getElementsByClassName("intro")[0];

            const text_right_array = ["", "", "Illustrator", "Animator", "Learner", ""]; 
            const text_center_array = ["Adam Warsing", "Student", "passionate", "exploring", "dedicated", ""]; 
            const text_left_array = ["I'm", ""];
            // Cycle between the text arrays
            textCycle = (target, array) => {
                target.addEventListener("animationiteration", () => {
                    target.style.width = "auto";
                    target.innerHTML = array[0];
                    array.shift();
                    
                    if (array.length == 0){
                        target.style.animation = "textMoveFinal 2s ease-in-out both"
                    }

                    if (text_center_array.length == 0) {
                        text_right.style.display = "none";
                        text_center.style.display = "none";
                        text_left.style.display = "none";
                        text_welcome.style.display = "block";
                        text_welcome.style.animationPlayState = "running";
                    }
                })
            }
            // Make intro display none and animate
            setTimeout(() => {
                let id = null;
                console.log("now!")
                if (text_welcome.style.animationPlayState == "running"){
                            
                    var pos = 0;

                    clearInterval(id);
                    id = setInterval(frame, 1);

                    function frame() {
                        
                        if (Number.parseFloat(pos) == 50) {
                            clearInterval(id);
                            intro.style.display = "none";
                        }

                        else {
                            intro.style.clipPath = "inset(" + pos + "% "  + pos + "% " + pos + "% " + pos + "%)";
                            pos += 0.5;
                        }
                    }
                }
            }, 14000)
            // Start when loaded
            window.onload = () => {
                textCycle(text_right, text_right_array);
                textCycle(text_center, text_center_array);
                textCycle(text_left, text_left_array);
            }

        </script>
        <div class="container_grid">
            <nav>
                <ul>
                    <li><span id="nav_el">Home</span></li>
                    <li><span id="nav_el">About</span></li>
                    <li><span id="nav_el">Projects</span></li>
                </ul>
            </nav>
        </div>
    </body>
</html>